<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI编程风险全面解析 | B站UP主分享</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 50px;
            padding: 40px 0;
        }
        
        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .stats-banner {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .stat-item {
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            transition: transform 0.3s ease;
        }
        
        .stat-item:nth-child(2) {
            background: linear-gradient(45deg, #4834d4, #686de0);
        }
        
        .stat-item:nth-child(3) {
            background: linear-gradient(45deg, #00d2d3, #54a0ff);
        }
        
        .stat-item:nth-child(4) {
            background: linear-gradient(45deg, #ff9ff3, #f368e0);
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 3em;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .navigation {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 20px;
            z-index: 100;
        }
        
        .nav-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .nav-link {
            padding: 12px 24px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .risk-category {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .risk-title {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 30px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .risk-icon {
            font-size: 1.2em;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .security-icon { background: linear-gradient(45deg, #ff6b6b, #ee5a24); }
        .legal-icon { background: linear-gradient(45deg, #4834d4, #686de0); }
        .privacy-icon { background: linear-gradient(45deg, #00d2d3, #54a0ff); }
        .quality-icon { background: linear-gradient(45deg, #ff9ff3, #f368e0); }
        .human-icon { background: linear-gradient(45deg, #32ff7e, #00d4aa); }
        .tools-icon { background: linear-gradient(45deg, #ff3838, #ff6348); }
        
        .risk-overview {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .case-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-top: 4px solid #667eea;
        }
        
        .case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .case-title {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .case-impact {
            background: #fff3cd;
            color: #856404;
            padding: 10px 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #ffeaa7;
            font-weight: 500;
        }
        
        .case-details {
            color: #555;
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .data-highlight {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .sources {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .sources h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1em;
        }
        
        .source-link {
            display: inline-block;
            background: #f8f9fa;
            padding: 8px 12px;
            margin: 5px;
            border-radius: 8px;
            text-decoration: none;
            color: #495057;
            font-size: 0.9em;
            transition: all 0.3s ease;
            border: 1px solid #dee2e6;
        }
        
        .source-link:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }
        
        .mitigation-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #28a745;
        }
        
        .mitigation-title {
            color: #155724;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .footer {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 40px;
            margin-top: 50px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .cta-section {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .risk-category {
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            
            .nav-links {
                flex-direction: column;
                align-items: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .cases-grid {
                grid-template-columns: 1fr;
            }



            .stat-item::after {
                content: "点击查看详情";
                position: absolute;
                bottom: -25px;
                left: 50%;
                transform: translateX(-50%);
                font-size: 0.7em;
                color: #666;
                opacity: 0.8;
            }
        }
        
        .trend-chart {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }
        
        .chart-title {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .chart-visual {
            display: flex;
            justify-content: space-around;
            align-items: end;
            height: 200px;
            margin: 20px 0;
        }
        
        .bar {
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 5px 5px 0 0;
            color: white;
            display: flex;
            align-items: end;
            justify-content: center;
            font-weight: bold;
            width: 80px;
            position: relative;
        }
        
        .bar::after {
            content: attr(data-value);
            position: absolute;
            bottom: 10px;
            color: white;
            font-size: 0.9em;
        }
        
        .bar-label {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        /* 悬浮浮层样式 */
        .stat-item {
            position: relative;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚨 AI编程风险全面解析</h1>
            <p>深度剖析人工智能辅助编程的六大核心风险领域<br>
            基于2024-2025年最新研究报告与真实案例分析</p>
        </div>
        
        <div class="stats-banner">
            <h2 style="color: #2c3e50; margin-bottom: 20px;">📊 核心数据一览</h2>
            <div class="stats-grid">
                <div class="stat-item" data-tooltip="security">
                    <span class="stat-number">45%</span>
                    <span class="stat-label">AI代码引入安全漏洞的概率</span>
                </div>
                <div class="stat-item" data-tooltip="privacy">
                    <span class="stat-number">485%</span>
                    <span class="stat-label">企业数据向AI工具输入的增长</span>
                </div>
                <div class="stat-item" data-tooltip="quality">
                    <span class="stat-number">2×</span>
                    <span class="stat-label">代码流失率增长倍数</span>
                </div>
                <div class="stat-item" data-tooltip="secrets">
                    <span class="stat-number">40%</span>
                    <span class="stat-label">启用AI工具后密钥泄露率增长</span>
                </div>
            </div>
        </div>
        
        <nav class="navigation">
            <div class="nav-links">
                <a href="#security" class="nav-link">🔐 代码安全风险</a>
                <a href="#tools" class="nav-link">🛠️ 工具安全风险</a>
                <a href="#legal" class="nav-link">⚖️ 法律知识产权</a>
                <a href="#privacy" class="nav-link">🔒 隐私数据泄露</a>
                <a href="#quality" class="nav-link">📉 代码质量下降</a>
                <a href="#human" class="nav-link">👥 人为因素风险</a>
            </div>
        </nav>
        
        <section id="security" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon security-icon">🔐</span>
                代码安全风险：AI生成代码的安全隐患
            </h2>
            
            <div class="risk-overview">
                <p><strong>核心问题：</strong>AI模型通过学习包含大量不安全代码的公开数据集进行训练，导致其生成的代码中系统性地存在安全漏洞。研究表明，<span class="data-highlight">45%的AI生成代码包含安全缺陷</span>，其中许多属于OWASP Top 10高危漏洞类别。</p>
            </div>
            
            <div class="trend-chart">
                <div class="chart-title">不同编程语言AI代码安全风险分布</div>
                <div class="chart-visual">
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div class="bar" style="height: 140px;" data-value="70%"></div>
                        <div class="bar-label">Java</div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div class="bar" style="height: 90px;" data-value="45%"></div>
                        <div class="bar-label">JavaScript</div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div class="bar" style="height: 85px;" data-value="42%"></div>
                        <div class="bar-label">Python</div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div class="bar" style="height: 76px;" data-value="38%"></div>
                        <div class="bar-label">C#</div>
                    </div>
                </div>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">📊 Veracode 2025年GenAI代码安全报告</div>
                    <div class="case-impact">影响：45%的AI生成代码存在安全漏洞</div>
                    <div class="case-details">
                        <strong>研究范围：</strong>分析超过100个大型语言模型的80项编码任务<br>
                        <strong>关键发现：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>跨站脚本（XSS）防护失败率：<span class="data-highlight">86%</span></li>
                            <li>日志注入防护失败率：<span class="data-highlight">88%</span></li>
                            <li>Java语言风险最高，失败率超过<span class="data-highlight">70%</span></li>
                        </ul>
                        <strong>根本原因：</strong>AI模型安全性能停滞不前，无法随模型规模扩大而改善
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.veracode.com/blog/genai-code-security-report/" class="source-link" target="_blank">Veracode官方报告</a>
                        <a href="https://www.eenewseurope.com/en/report-finds-ai-generated-code-poses-security-risks/" class="source-link" target="_blank">EENews Europe分析</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🎓 斯坦福大学安全性对比研究</div>
                    <div class="case-impact">影响：AI辅助开发者编写的代码安全性明显更低</div>
                    <div class="case-details">
                        <strong>研究结论：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>有AI辅助的开发者：<span class="data-highlight">67%</span>提供安全解决方案</li>
                            <li>无AI辅助的对照组：<span class="data-highlight">79%</span>提供安全解决方案</li>
                            <li>SQL注入防护：AI辅助组失败率<span class="data-highlight">36%</span> vs 对照组<span class="data-highlight">7%</span></li>
                        </ul>
                        <strong>关键洞察：</strong>AI不仅生成不安全代码，还会增强开发者的虚假自信
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://arxiv.org/abs/2211.03622" class="source-link" target="_blank">斯坦福研究论文</a>
                        <a href="https://ee.stanford.edu/dan-boneh-and-team-find-relying-ai-more-likely-make-your-code-buggier" class="source-link" target="_blank">研究解读</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🔑 GitGuardian密钥泄露研究</div>
                    <div class="case-impact">影响：AI工具使用导致硬编码密钥泄露率显著上升</div>
                    <div class="case-details">
                        <strong>研究数据：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>启用Copilot的仓库密钥泄露率：<span class="data-highlight">6.4%</span></li>
                            <li>未使用AI工具的基线泄露率：<span class="data-highlight">4.6%</span></li>
                            <li>风险增长：<span class="data-highlight">+40%</span></li>
                        </ul>
                        <strong>原因分析：</strong>AI学习了训练数据中的不良实践，复制硬编码密钥的反模式
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://blog.gitguardian.com/github-copilot-security-and-privacy/" class="source-link" target="_blank">GitGuardian研究报告</a>
                        <a href="https://thehackernews.com/expert-insights/2025/06/exposed-developer-secrets-are-big.html" class="source-link" target="_blank">The Hacker News报道</a>
                    </div>
                </div>
            </div>
            
            <div class="mitigation-box">
                <div class="mitigation-title">🛡️ 缓解策略</div>
                <ul>
                    <li><strong>强制安全扫描：</strong>在CI/CD流程中集成SAST、DAST和SCA工具</li>
                    <li><strong>人工代码审查：</strong>所有AI生成的安全关键代码必须经过人工审查</li>
                    <li><strong>安全提示工程：</strong>培训开发者在提示中明确包含安全要求</li>
                    <li><strong>净化训练数据：</strong>对内部AI模型使用经过安全审查的训练数据</li>
                </ul>
            </div>
        </section>
        
        <section id="tools" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon tools-icon">🛠️</span>
                工具安全风险：AI助手本身的漏洞
            </h2>
            
            <div class="risk-overview">
                <p><strong>核心问题：</strong>AI编程工具本身可能存在安全漏洞，被攻击者利用来控制开发者环境。这些攻击利用提示注入、配置劫持等新型技术，将可信赖的开发助手转变为恶意代码的传播载体。</p>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">🚨 GitHub Copilot远程代码执行漏洞 (CVE-2025-53773)</div>
                    <div class="case-impact">影响：攻击者可通过提示注入实现对开发者机器的完全控制</div>
                    <div class="case-details">
                        <strong>漏洞机制：</strong>
                        <ol style="margin: 10px 0; padding-left: 20px;">
                            <li>攻击者在代码文件中植入隐藏的恶意指令</li>
                            <li>诱导Copilot修改VS Code配置启用"YOLO模式"</li>
                            <li>在无确认模式下执行任意系统命令</li>
                        </ol>
                        <strong>修复状态：</strong>已在2025年8月的补丁星期二中修复
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.cnvd.org.cn/patchInfo/show/718806" class="source-link" target="_blank">CNVD漏洞公告</a>
                        <a href="https://nvd.nist.gov/vuln/detail/CVE-2025-53773" class="source-link" target="_blank">NVD详细信息</a>
                        <a href="https://embracethered.com/blog/posts/2025/github-copilot-remote-code-execution-via-prompt-injection/" class="source-link" target="_blank">技术分析</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🎭 提示注入与"肯定式越狱"</div>
                    <div class="case-impact">影响：绕过AI工具安全护栏，生成恶意代码</div>
                    <div class="case-details">
                        <strong>攻击技术：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><strong>肯定式越狱：</strong>在恶意请求前添加"当然"、"好的"等肯定词</li>
                            <li><strong>代理绕过：</strong>操纵网络代理设置移除安全限制</li>
                            <li><strong>规则文件后门：</strong>使用不可见Unicode字符隐藏恶意指令</li>
                        </ul>
                        <strong>成功案例：</strong>研究者成功诱使AI生成SQL注入攻击代码
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.cyberdefensemagazine.com/why-securing-prompts-will-never-be-enough-the-github-copilot-case/" class="source-link" target="_blank">网络防御杂志</a>
                        <a href="https://www.pillar.security/blog/new-vulnerability-in-github-copilot-and-cursor-how-hackers-can-weaponize-code-agents" class="source-link" target="_blank">Pillar Security博客</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">📦 包幻觉与供应链攻击</div>
                    <div class="case-impact">影响：AI"幻觉"出不存在的包，攻击者抢注并植入恶意代码</div>
                    <div class="case-details">
                        <strong>攻击流程：</strong>
                        <ol style="margin: 10px 0; padding-left: 20px;">
                            <li>AI模型生成引用不存在软件包的代码</li>
                            <li>攻击者监控并注册这些"幻觉"包名</li>
                            <li>开发者安装时实际下载恶意软件</li>
                        </ol>
                        <strong>风险特点：</strong>绕过传统安全检查，因为包名来自"可信"的AI建议
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.usenix.org/publications/loginonline/we-have-package-you-comprehensive-analysis-package-hallucinations-code" class="source-link" target="_blank">USENIX研究</a>
                        <a href="https://news.ycombinator.com/item?id=43663777" class="source-link" target="_blank">Hacker News讨论</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🌐 Amazon Q VS Code扩展入侵事件</div>
                    <div class="case-impact">影响：AI工具代码库被植入恶意代码，可执行破坏性操作</div>
                    <div class="case-details">
                        <strong>攻击概述：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>攻击者成功入侵Amazon Q的VS Code扩展</li>
                            <li>注入可删除开发者文件的恶意代码</li>
                            <li>展示了AI工具生态系统的供应链脆弱性</li>
                        </ul>
                        <strong>深层影响：</strong>证明AI助手本身可能成为恶意软件的分发渠道
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.secrss.com/articles/81292" class="source-link" target="_blank">安全内参分析</a>
                    </div>
                </div>
            </div>
            
            <div class="mitigation-box">
                <div class="mitigation-title">🛡️ 缓解策略</div>
                <ul>
                    <li><strong>工具来源验证：</strong>只使用官方渠道下载AI编程工具</li>
                    <li><strong>权限最小化：</strong>限制AI工具的系统访问权限</li>
                    <li><strong>网络隔离：</strong>在受控环境中运行AI工具</li>
                    <li><strong>定期安全审计：</strong>监控AI工具的异常行为</li>
                </ul>
            </div>
        </section>
        
        <section id="legal" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon legal-icon">⚖️</span>
                法律知识产权风险：AI时代的法律雷区
            </h2>
            
            <div class="risk-overview">
                <p><strong>核心问题：</strong>AI生成代码存在双重法律风险：可能侵犯他人版权，同时自身可能无法获得版权保护。<span class="data-highlight">35%的AI代码存在许可证不合规问题</span>，可能导致整个专有项目被迫开源。</p>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">⚖️ GitHub Copilot集体诉讼案</div>
                    <div class="case-impact">影响：AI工具面临"前所未有规模的软件盗版"指控</div>
                    <div class="case-details">
                        <strong>核心指控：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>违反开源软件许可条款（MIT、GPL、Apache）</li>
                            <li>未提供必要的署名信息</li>
                            <li>违反《数字千年版权法》（DMCA）</li>
                        </ul>
                        <strong>当前状态：</strong>部分指控被驳回，但许可证违约核心主张仍有效，案件仍在进行中
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.saverilawfirm.com/our-cases/github-copilot-intellectual-property-litigation" class="source-link" target="_blank">诉讼详情</a>
                        <a href="https://blog.startupstash.com/github-copilot-litigation-a-deep-dive-into-the-legal-battle-over-ai-code-generation-e37cd06ed11c" class="source-link" target="_blank">深度分析</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🎭 "AI换脸"著作权侵权案（2024年典型案例）</div>
                    <div class="case-impact">影响：确立AI生成内容版权侵权的法律先例</div>
                    <div class="case-details">
                        <strong>案件要点：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>中国最高人民法院2024年知识产权典型案例</li>
                            <li>法院认定AI算法局部替换不构成独创性改编</li>
                            <li>确立AI服务提供商的合理注意义务</li>
                        </ul>
                        <strong>软件开发启示：</strong>AI生成代码可能被认定为训练数据的衍生作品，存在侵权风险
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://ipc.court.gov.cn/zh-cn/news/view-4205.html" class="source-link" target="_blank">最高法院公告</a>
                        <a href="https://www.ccpit.org/a/20250422/20250422s7yx.html" class="source-link" target="_blank">中国贸促会解读</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🔄 许可证污染风险</div>
                    <div class="case-impact">影响：可能导致整个专有软件被强制开源</div>
                    <div class="case-details">
                        <strong>风险机制：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>AI生成源自GPL代码的片段</li>
                            <li>集成到专有软件中</li>
                            <li>触发GPL的"病毒式"开源义务</li>
                        </ul>
                        <strong>统计数据：</strong>约<span class="data-highlight">35%</span>的AI生成代码样本存在许可证不合规问题<br>
                        <strong>责任转移：</strong>AI工具提供商将法律责任完全转移给最终用户
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.leadrpro.com/blog/who-really-owns-code-when-ai-does-the-writing" class="source-link" target="_blank">所有权分析</a>
                        <a href="https://arxiv.org/html/2508.16853v1" class="source-link" target="_blank">许可证合规框架</a>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="privacy" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon privacy-icon">🔒</span>
                隐私数据泄露风险：企业机密的无形流失
            </h2>
            
            <div class="risk-overview">
                <p><strong>核心问题：</strong>开发者通过AI工具的提示词无意中泄露企业敏感数据。2024年数据显示，<span class="data-highlight">企业员工向AI工具输入敏感数据的行为增长了485%</span>，引发政府和企业高度警惕。</p>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">🏢 三星源代码泄露事件</div>
                    <div class="case-impact">影响：高度机密的半导体技术通过ChatGPT意外泄露</div>
                    <div class="case-details">
                        <strong>泄露内容：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>新程序的完整专有源代码</li>
                            <li>芯片缺陷识别的内部测试序列</li>
                            <li>机密会议的完整文字记录</li>
                        </ul>
                        <strong>应对措施：</strong>三星最初限制数据量至1024字节，最终全面禁止使用公共AI工具<br>
                        <strong>教训：</strong>善意员工的无心之失可能造成灾难性后果
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://networkassured.com/security/all-chatgpt-cybersecurity-risks-attacks/" class="source-link" target="_blank">Network Assured报道</a>
                        <a href="https://www.cloudflare.com/zh-cn/the-net/risk-reward-ai/" class="source-link" target="_blank">Cloudflare风险分析</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🏛️ 美国众议院Copilot禁令</div>
                    <div class="case-impact">影响：政府机构正式确认AI工具的数据泄露风险</div>
                    <div class="case-details">
                        <strong>事件详情：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><strong>时间：</strong>2024年3月</li>
                            <li><strong>措施：</strong>禁止众议院工作人员使用微软Copilot</li>
                            <li><strong>原因：</strong>担心数据泄露到未经批准的云服务中</li>
                        </ul>
                        <strong>背景数据：</strong>Cyberhaven报告显示员工向AI工具输入敏感数据行为激增<span class="data-highlight">485%</span>
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.secrss.com/articles/74228" class="source-link" target="_blank">安全内参报道</a>
                    </div>
                </div>
                
            </div>
            
            <div class="mitigation-box">
                <div class="mitigation-title">🛡️ 缓解策略</div>
                <ul>
                    <li><strong>数据分类政策：</strong>明确定义哪些数据禁止输入AI工具</li>
                    <li><strong>企业级工具：</strong>选择提供DPA保证和本地部署的AI工具</li>
                    <li><strong>网络控制：</strong>在网络层面阻止未授权的AI端点访问</li>
                    <li><strong>提示词清理：</strong>部署自动剥离敏感信息的工具</li>
                </ul>
            </div>
        </section>
        
        <section id="quality" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon quality-icon">📉</span>
                代码质量下降：技术债的加速器
            </h2>
            
            <div class="risk-overview">
                <p><strong>核心问题：</strong>AI工具优化代码生成速度，但忽略长期可维护性。GitClear研究显示，<span class="data-highlight">代码流失率预计将翻倍</span>，代码复用率下降，技术债务加速累积。</p>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">📊 GitClear "Coding on Copilot" 研究</div>
                    <div class="case-impact">影响：AI工具导致代码质量系统性下降</div>
                    <div class="case-details">
                        <strong>研究范围：</strong>分析2020-2023年超过1.53亿行代码变更<br>
                        <strong>关键发现：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>代码流失率预计<span class="data-highlight">翻倍</span>（2024 vs 2021基线）</li>
                            <li>代码复用率显著下降</li>
                            <li>复制/粘贴代码比例上升</li>
                            <li>违反DRY（不要重复自己）原则</li>
                        </ul>
                        <strong>结论：</strong>AI代码更像"短期合同工"产出，忽略长期可维护性
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.gitclear.com/coding_on_copilot_data_shows_ais_downward_pressure_on_code_quality" class="source-link" target="_blank">GitClear原始研究</a>
                        <a href="https://stackoverflow.blog/2024/03/22/is-ai-making-your-code-worse/" class="source-link" target="_blank">Stack Overflow分析</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🐛 "每月第三个星期五"算法缺陷</div>
                    <div class="case-impact">影响：AI生成看似正确但逻辑荒谬的代码</div>
                    <div class="case-details">
                        <strong>案例描述：</strong>开发者要求Claude Sonnet编写"查找月份第三个星期五"的函数<br>
                        <strong>AI的逻辑错误：</strong>
                        <ol style="margin: 10px 0; padding-left: 20px;">
                            <li>找到第一个星期五</li>
                            <li>加上14天到达第三个星期五</li>
                            <li>错误地检查是否跨月（逻辑上不可能）</li>
                        </ol>
                        <strong>深层问题：</strong>AI是概率模式匹配器，非逻辑推理引擎，会产生"貌似合理"的错误代码
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.reddit.com/r/ChatGPTCoding/comments/1dysrye/without_good_tooling_around_them_llms_are_utterly/" class="source-link" target="_blank">Reddit案例讨论</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">📈 调试时间增长悖论</div>
                    <div class="case-impact">影响：AI提升编码速度，但增加调试和维护成本</div>
                    <div class="case-details">
                        <strong>调查数据：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><span class="data-highlight">67%</span>的开发者报告调试时间增加</li>
                            <li>缺陷报告数量增加<span class="data-highlight">40%</span></li>
                            <li>Gartner调研：<span class="data-highlight">68%</span>企业表示AI代码需要50%以上重写</li>
                        </ul>
                        <strong>根本原因：</strong>AI优化"代码添加"而非"代码健康"，缺乏架构理解
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.turintech.ai/blog/the-hidden-cost-of-ai-generated-code-what-research-and-industry-trends-are-revealing" class="source-link" target="_blank">TurinTech研究</a>
                        <a href="https://www.infoq.cn/article/XCGwofidsTyvAQaakP2z" class="source-link" target="_blank">InfoQ分析</a>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="human" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon human-icon">👥</span>
                人为因素风险：技能退化与认知偏差
            </h2>
            
            <div class="risk-overview">
                <p><strong>核心问题：</strong>AI工具使用导致开发者技能退化和认知偏差。研究显示，<span class="data-highlight">经验丰富的开发者使用AI后反而慢了19%</span>，同时对AI的信任度正在快速下降。</p>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">📊 Stack Overflow 2025年信任度调查</div>
                    <div class="case-impact">影响：开发者对AI工具的信任度大幅下降</div>
                    <div class="case-details">
                        <strong>信任度变化：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>2024年信任AI准确性：<span class="data-highlight">43%</span></li>
                            <li>2025年信任AI准确性：<span class="data-highlight">33%</span></li>
                            <li>下降幅度：<span class="data-highlight">-23%</span></li>
                        </ul>
                        <strong>趋势分析：</strong>行业正走出炒作周期，开发者对AI能力和局限性有了更现实的认识
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://leaddev.com/technical-direction/trust-in-ai-coding-tools-is-plummeting" class="source-link" target="_blank">LeadDev报告</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">⏱️ 生产力悖论研究</div>
                    <div class="case-impact">影响：AI工具对不同经验水平开发者的影响截然不同</div>
                    <div class="case-details">
                        <strong>研究发现：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>经验丰富开发者实际速度：<span class="data-highlight">慢19%</span></li>
                            <li>但主观感觉：<span class="data-highlight">快20%</span></li>
                            <li>感知与现实的巨大鸿沟</li>
                        </ul>
                        <strong>原因分析：</strong>时间从编写代码转移到撰写提示词、审查输出和调试AI错误
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.reddit.com/r/programming/comments/1lxh8ip/study_finds_that_ai_tools_make_experienced/" class="source-link" target="_blank">Reddit讨论</a>
                        <a href="https://completeaitraining.com/news/ai-coding-tools-slow-down-experienced-developers-despite/" class="source-link" target="_blank">Complete AI Training</a>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">🧠 虚假自信与技能退化</div>
                    <div class="case-impact">影响：AI工具导致开发者过度自信和核心技能丧失</div>
                    <div class="case-details">
                        <strong>认知偏差：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>开发者对代码安全性的信心增长<span class="data-highlight">3.5倍</span></li>
                            <li>实际代码安全性却显著下降</li>
                            <li>形成AI放大的"达克效应"</li>
                        </ul>
                        <strong>长期风险：</strong>基础编程能力、批判性思维和系统设计能力的系统性退化
                    </div>
                    <div class="sources">
                        <h4>📚 相关资料</h4>
                        <a href="https://www.rsaconference.com/library/blog/the-dark-side-of-ai-dependency-risks-in-software-development" class="source-link" target="_blank">RSA Conference分析</a>
                        <a href="https://blog.secureflag.com/2024/10/16/the-risks-of-generative-ai-coding-in-software-development/" class="source-link" target="_blank">SecureFlag博客</a>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="comprehensive" class="risk-category">
            <h2 class="risk-title">
                <span class="risk-icon" style="background: linear-gradient(45deg, #ffa726, #ff7043);">🎯</span>
                综合缓解策略：构建负责任的AI采用框架
            </h2>
            
            <div class="risk-overview">
                <p><strong>战略原则：</strong>"信任，但要验证——并且将验证过程自动化"。成功的组织将培养批判性思维、持续学习和智能人类监督的文化，形成高效、安全的人机协同模式。</p>
            </div>
            
            <div class="cases-grid">
                <div class="case-card">
                    <div class="case-title">🔧 技术控制与DevSecOps集成</div>
                    <div class="case-details">
                        <strong>关键措施：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><strong>全面自动化安全检测：</strong>CI/CD中强制SAST、DAST、SCA扫描</li>
                            <li><strong>AI专用工具：</strong>识别AI代码、清理敏感信息、阻断未授权端点</li>
                            <li><strong>净化训练数据：</strong>内部模型仅使用经过安全审查的代码训练</li>
                            <li><strong>实时监控：</strong>对AI代理行为进行运行时监控</li>
                        </ul>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">📋 治理政策与法律保障</div>
                    <div class="case-details">
                        <strong>关键措施：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><strong>AI使用政策：</strong>明确哪些数据禁止用于AI提示</li>
                            <li><strong>供应商审查：</strong>要求数据隐私保证和IP赔偿条款</li>
                            <li><strong>本地化部署：</strong>优先选择VPC或本地环境部署的AI工具</li>
                            <li><strong>合规流程：</strong>将AI代码纳入OSS合规审查</li>
                        </ul>
                    </div>
                </div>
                
                <div class="case-card">
                    <div class="case-title">👨‍💻 开发者赋能与文化建设</div>
                    <div class="case-details">
                        <strong>关键措施：</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li><strong>批判性审查文化：</strong>将AI视为"可能犯错的结对程序员"</li>
                            <li><strong>提示词工程：</strong>培训精确、包含安全约束的提示编写</li>
                            <li><strong>人类主导迭代：</strong>AI生成初稿，人类优化和改进</li>
                            <li><strong>技能保持：</strong>强化系统设计和底层原理理解</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="footer">
            <div class="cta-section">
                <h2 style="margin-bottom: 20px;">🎬 视频分享要点</h2>
                <div style="text-align: left; max-width: 800px; margin: 0 auto;">
                    <h3 style="color: #fff; margin: 20px 0 10px;">📢 核心观点</h3>
                    <ul style="color: rgba(255,255,255,0.9); line-height: 2;">
                        <li><strong>AI编程是双刃剑：</strong>45%概率引入安全漏洞 vs 显著提升编码速度</li>
                        <li><strong>风险多维度：</strong>不仅是技术问题，更涉及法律、隐私、质量、人才培养</li>
                        <li><strong>案例触目惊心：</strong>三星泄露、众议院禁令、GitHub诉讼案等</li>
                        <li><strong>解决方案存在：</strong>技术控制+治理政策+文化建设的综合框架</li>
                    </ul>
 
                </div>
            </div>
            
            <div style="margin-top: 40px; color: #666; font-size: 0.9em;">
                <p>📝 本资料基于2024-2025年最新研究报告整理，包含完整的案例分析和资料链接</p>
                <p>🎯 适用于B站UP主AI编程风险主题视频分享</p>
                <p style="margin-top: 20px;">
                    <strong>主要数据源：</strong>
                    <a href="https://www.veracode.com/blog/genai-code-security-report/" style="color: #667eea;">Veracode安全报告</a> • 
                    <a href="https://arxiv.org/abs/2211.03622" style="color: #667eea;">斯坦福大学研究</a> • 
                    <a href="https://www.gitclear.com/coding_on_copilot_data_shows_ais_downward_pressure_on_code_quality" style="color: #667eea;">GitClear代码质量研究</a> • 
                    <a href="https://leaddev.com/technical-direction/trust-in-ai-coding-tools-is-plummeting" style="color: #667eea;">Stack Overflow调查</a>
                </p>
            </div>
        </div>
    </div>
    
    <script>
        // 平滑滚动导航
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });
        
        // 滚动时导航栏样式变化
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('.navigation');
            if (window.scrollY > 100) {
                nav.style.background = 'rgba(255,255,255,0.98)';
                nav.style.boxShadow = '0 15px 35px rgba(0,0,0,0.15)';
            } else {
                nav.style.background = 'rgba(255,255,255,0.95)';
                nav.style.boxShadow = '0 10px 30px rgba(0,0,0,0.1)';
            }
        });
        
        // 统计数字动画
        function animateNumbers() {
            const stats = document.querySelectorAll('.stat-number');
            stats.forEach(stat => {
                const finalValue = stat.textContent;
                stat.textContent = '0';
                
                let currentValue = 0;
                const increment = finalValue.includes('%') ? 
                    parseInt(finalValue) / 50 : 
                    finalValue.includes('×') ? 0.05 : 10;
                
                const timer = setInterval(() => {
                    if (finalValue.includes('%')) {
                        currentValue += increment;
                        if (currentValue >= parseInt(finalValue)) {
                            currentValue = parseInt(finalValue);
                            stat.textContent = currentValue + '%';
                            clearInterval(timer);
                        } else {
                            stat.textContent = Math.floor(currentValue) + '%';
                        }
                    } else if (finalValue.includes('×')) {
                        currentValue += increment;
                        if (currentValue >= parseFloat(finalValue)) {
                            stat.textContent = finalValue;
                            clearInterval(timer);
                        } else {
                            stat.textContent = currentValue.toFixed(1) + '×';
                        }
                    } else {
                        currentValue += increment;
                        if (currentValue >= parseInt(finalValue)) {
                            stat.textContent = finalValue;
                            clearInterval(timer);
                        } else {
                            stat.textContent = Math.floor(currentValue);
                        }
                    }
                }, 50);
            });
        }
        
        // 页面加载完成后开始动画
        window.addEventListener('load', function() {
            setTimeout(animateNumbers, 500);
        });
        
        // 卡片悬停效果增强
        document.querySelectorAll('.case-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.borderTopColor = '#ff6b6b';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.borderTopColor = '#667eea';
            });
        });

        // 创建全局浮层容器（确保不被任何元素遮挡）
        const globalTooltip = document.createElement('div');
        globalTooltip.className = 'global-tooltip';
        globalTooltip.style.cssText = `
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            border-radius: 15px;
            padding: 20px;
            font-size: 0.9em;
            line-height: 1.6;
            max-width: 400px;
            min-width: 300px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 999999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            text-align: left;
            backdrop-filter: blur(10px);
            pointer-events: none;
        `;
        
        // 为全局浮层添加内部样式
        const tooltipStyle = document.createElement('style');
        tooltipStyle.innerHTML = `
            .global-tooltip h4 {
                color: #ffd700;
                margin-bottom: 10px;
                font-size: 1em;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                padding-bottom: 5px;
            }
            .global-tooltip ul {
                margin: 10px 0;
                padding-left: 20px;
            }
            .global-tooltip li {
                margin: 5px 0;
            }
            .global-tooltip .highlight {
                background: rgba(255, 215, 0, 0.2);
                padding: 2px 5px;
                border-radius: 3px;
                color: #ffd700;
                font-weight: bold;
            }
            .global-tooltip .source {
                margin-top: 10px;
                padding-top: 10px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
                font-size: 0.8em;
                color: #ccc;
            }
        `;
        document.head.appendChild(tooltipStyle);
        document.body.appendChild(globalTooltip);

        // 定义tooltip内容
        const tooltipContents = {
            'security': `
                <h4>📊 Veracode 2025年GenAI代码安全报告</h4>
                <p><strong>研究范围：</strong>分析超过100个大型语言模型的80项编程任务</p>
                <p><strong>核心发现：</strong></p>
                <ul>
                    <li>跨站脚本(XSS)防护失败率：<span class="highlight">86%</span></li>
                    <li>日志注入防护失败率：<span class="highlight">88%</span></li>
                    <li>Java代码安全失败率：<span class="highlight">70%</span></li>
                    <li>属于OWASP Top 10高危漏洞类别</li>
                </ul>
                <p><strong>根本原因：</strong>AI模型在包含大量不安全代码的数据集上训练，安全性能停滞不前</p>
                <div class="source">数据来源：Veracode安全公司</div>
            `,
            'privacy': `
                <h4>📈 Cyberhaven 2024年数据泄露报告</h4>
                <p><strong>统计期间：</strong>2023年到2024年整年对比</p>
                <p><strong>泄露内容包括：</strong></p>
                <ul>
                    <li>公司专有源代码</li>
                    <li>研发数据和算法</li>
                    <li>客户支持信息</li>
                    <li>内部文档和会议记录</li>
                </ul>
                <p><strong>政府响应：</strong>美国众议院2024年3月<span class="highlight">禁止使用微软Copilot</span></p>
                <p><strong>根本问题：</strong>云端AI瓦解传统企业安全边界，治理和培训严重滞后</p>
                <div class="source">数据来源：Cyberhaven网络安全公司</div>
            `,
            'quality': `
                <h4>📉 GitClear "Coding on Copilot" 研究</h4>
                <p><strong>研究规模：</strong>分析2020-2023年超过1.53亿行代码变更</p>
                <p><strong>关键发现：</strong></p>
                <ul>
                    <li>代码流失率相比2021年基线<span class="highlight">翻倍</span></li>
                    <li>代码复用率显著下降</li>
                    <li>复制粘贴代码比例上升</li>
                    <li>严重违反DRY原则</li>
                </ul>
                <p><strong>深层含义：</strong>"代码流失"指代码在编写后两周内被撤销或大幅修改，是衡量低质量代码的关键指标</p>
                <p><strong>结论：</strong>AI代码更像"短期合同工"产出，忽略长期可维护性</p>
                <div class="source">数据来源：GitClear代码分析公司</div>
            `,
            'secrets': `
                <h4>🔑 GitGuardian密钥泄露研究</h4>
                <p><strong>数据对比：</strong></p>
                <ul>
                    <li>启用Copilot的仓库：<span class="highlight">6.4%</span>泄露率</li>
                    <li>未使用AI工具基线：<span class="highlight">4.6%</span>泄露率</li>
                    <li>样本规模：2万个代码仓库</li>
                </ul>
                <p><strong>典型泄露内容：</strong>API密钥、数据库密码、身份验证令牌</p>
                <p><strong>根本原因：</strong>AI学习了训练数据中硬编码密钥的不良实践，复制这些反模式</p>
                <p><strong>风险特点：</strong>开发者在追求AI效率时放松安全警惕</p>
                <div class="source">数据来源：GitGuardian安全公司</div>
            `
        };

        // 数据统计点击提示优化
        document.querySelectorAll('.stat-item').forEach(item => {
            const tooltipType = item.getAttribute('data-tooltip');
            const tooltipContent = tooltipContents[tooltipType];
            
            if (!tooltipContent) return;
            
            // 点击显示/隐藏浮层
            item.addEventListener('click', function(e) {
                e.stopPropagation(); // 阻止事件冒泡
                
                // 检查当前浮层是否已显示相同内容
                const isCurrentTooltipVisible = globalTooltip.style.opacity === '1' && 
                    globalTooltip.getAttribute('data-current') === tooltipType;
                
                if (isCurrentTooltipVisible) {
                    // 如果点击的是当前显示的浮层对应的数字，则隐藏浮层
                    globalTooltip.style.opacity = '0';
                    globalTooltip.style.visibility = 'hidden';
                    globalTooltip.style.pointerEvents = 'none';
                    globalTooltip.removeAttribute('data-current');
                    return;
                }
                
                // 设置浮层内容
                if (window.innerWidth > 768) {
                    // 桌面端：显示在数字下方，带箭头
                    globalTooltip.innerHTML = `
                        <div style="position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); border: 8px solid transparent; border-bottom-color: rgba(0, 0, 0, 0.95);"></div>
                        ${tooltipContent}
                    `;
                    
                    // 获取stat-item的位置
                    const rect = item.getBoundingClientRect();
                    
                    // 计算浮层位置（显示在数字下方）
                    const left = rect.left + rect.width / 2;
                    const top = rect.bottom + 20;
                    
                    // 确保浮层不超出屏幕边界
                    const tooltipWidth = 400;
                    const finalLeft = Math.max(tooltipWidth / 2 + 10, Math.min(left, window.innerWidth - tooltipWidth / 2 - 10));
                    
                    // 设置位置
                    globalTooltip.style.left = (finalLeft - tooltipWidth / 2) + 'px';
                    globalTooltip.style.top = top + 'px';
                    globalTooltip.style.transform = 'none';
                    globalTooltip.style.maxWidth = '400px';
                } else {
                    // 移动端：居中显示，无箭头
                    globalTooltip.innerHTML = tooltipContent;
                    globalTooltip.style.left = '50%';
                    globalTooltip.style.top = '50%';
                    globalTooltip.style.transform = 'translate(-50%, -50%)';
                    globalTooltip.style.maxWidth = '90vw';
                }
                
                // 标记当前显示的浮层类型
                globalTooltip.setAttribute('data-current', tooltipType);
                
                // 显示浮层
                globalTooltip.style.opacity = '1';
                globalTooltip.style.visibility = 'visible';
                globalTooltip.style.pointerEvents = 'auto';
            });
        });

        // 浮层内部点击事件：阻止冒泡，保持浮层显示
        globalTooltip.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // 全局点击事件：点击非浮层区域时隐藏浮层
        document.addEventListener('click', function(e) {
            // 检查点击的元素是否是数字卡片或浮层
            const isStatItem = e.target.closest('.stat-item');
            const isTooltip = e.target.closest('.global-tooltip');
            
            // 如果点击的不是数字卡片也不是浮层，则隐藏浮层
            if (!isStatItem && !isTooltip) {
                globalTooltip.style.opacity = '0';
                globalTooltip.style.visibility = 'hidden';
                globalTooltip.style.pointerEvents = 'none';
                globalTooltip.removeAttribute('data-current');
            }
        });

        // 窗口滚动或调整大小时重新计算浮层位置
        let currentTooltipType = null;

        function updateTooltipPosition() {
            if (globalTooltip.style.opacity === '1' && currentTooltipType && window.innerWidth > 768) {
                // 找到当前激活的stat-item
                const activeItem = document.querySelector(`[data-tooltip="${currentTooltipType}"]`);
                if (activeItem) {
                    const rect = activeItem.getBoundingClientRect();
                    const left = rect.left + rect.width / 2;
                    const top = rect.bottom + 20;
                    
                    const tooltipWidth = 400;
                    const finalLeft = Math.max(tooltipWidth / 2 + 10, Math.min(left, window.innerWidth - tooltipWidth / 2 - 10));
                    
                    globalTooltip.style.left = (finalLeft - tooltipWidth / 2) + 'px';
                    globalTooltip.style.top = top + 'px';
                    globalTooltip.style.transform = 'none';
                }
            }
        }

        // 监听滚动和窗口调整
        window.addEventListener('scroll', updateTooltipPosition);
        window.addEventListener('resize', updateTooltipPosition);

        // 记录当前显示的浮层类型（用于重新计算位置）
        const originalSetAttribute = globalTooltip.setAttribute.bind(globalTooltip);
        globalTooltip.setAttribute = function(name, value) {
            if (name === 'data-current') {
                currentTooltipType = value;
            }
            return originalSetAttribute(name, value);
        };

        const originalRemoveAttribute = globalTooltip.removeAttribute.bind(globalTooltip);
        globalTooltip.removeAttribute = function(name) {
            if (name === 'data-current') {
                currentTooltipType = null;
            }
            return originalRemoveAttribute(name);
        };
    </script>
</body>
</html>
